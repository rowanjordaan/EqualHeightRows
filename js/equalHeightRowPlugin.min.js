!function(l){l.fn.equalHeightRows=function(t){var e=l(this),i={settings:{}};i.settings=l.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null,wrapRows:!1,resizeTimeout:150,bindOnResize:!0,reinitImage:"individual"},t);var c=i.settings,a=function(t,e){var n={};n.selector=l(t),n.items=n.selector.find(c.itemSelector),n.itemAmount=n.items.length,n.rowsDom=[],n.rowsHeight=[];var r=1,s=parseFloat(n.selector.css("width")),a=0;return(c.wrapRows||0<l(n.selector).find('[data-type="row"]:nth-child(1)').length)&&l(n.selector).find('[data-type="row"]').contents().unwrap(),l(n.items).css("height","auto"),n.rowsDom["row"+r]=[],n.rowsHeight["row"+r]=0,n.items.each(function(t,e){if(a=parseFloat(a+parseFloat(l(e).css("width"))),s<a&&(r++,a=parseFloat(l(e).css("width")),n.rowsDom["row"+r]=[],n.rowsHeight["row"+r]=0),n.rowsDom["row"+r].push(e),parseInt(t+1)>=n.itemAmount||parseFloat(a+parseFloat(l(e).next().css("width")))>s){var o=l(n.rowsDom["row"+r]);if(null!=c.innerSelectors){var i=c.innerSelectors.split(",");l.each(i,function(t,e){var i,n;i=o.find(e),n=0,i.css({height:"auto"}),1<i.length&&(i.each(function(){var t=l(this).outerHeight();n=n<=t?t:n}),i.css({height:n+"px"}))})}o.each(function(t,e){n.rowsHeight["row"+r]=parseFloat(l(e).css("height"))>n.rowsHeight["row"+r]?parseFloat(l(e).css("height")):n.rowsHeight["row"+r]}),o.css("height",n.rowsHeight["row"+r]+"px"),c.wrapRows&&o.wrapAll('<div class="'+c.wrapRows+" "+t+'" data-type="row"></div>')}}),l.isFunction(e)&&e(n),n};return i.execute=function(i){var n={};return i=void 0!==i&&i,e.each(function(t,e){(!1===i||!1!==i&&l(e).is(i))&&(n[t]=a(l(e)))}),n},this.each(function(t,e){var i,n=e,o=function(){if(l(n).attr("data-lastcall")!=parseFloat(l(n).css("width"))){l(n).attr("data-lastcall",parseFloat(l(n).css("width")));var t=a(e);l.isFunction(c.onResize)&&c.onResize(t)}};if(c.bindOnResize&&l(window).on("resize",function(){return c.resizeTimeout?(clearTimeout(i),i=setTimeout(function(){o()},c.resizeTimeout)):o(),!0}),c.reinitImage){reinitImage=(c.reinitImage,c.reinitImage);l(e).find("img").length;var r=function(t){a(e,function(){setTimeout(function(){l(t).attr("imagereinit",!0)},10)})};l(e).find("img").each(function(t,e){var i=new Image;i.onload=function(){0,l(e).attr("loaded",!0),"individual"==reinitImage&&r(e)},i.onerror=function(){console.error("Cannot load image("+t+"): "+l(e).attr("src")),0,"individual"==reinitImage&&r(e)},i.src=l(this).attr("src")})}var s;return s=a(e),console.log(s),l.isFunction(c.onInit)&&c.onInit(s),s}),i}}(jQuery);
