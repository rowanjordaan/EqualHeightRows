!function(t){t.fn.equalHeightRows=function(e){var n=t.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null},e);this.each(function(e,i){var o=this,r=t(this),u=r.find(n.itemSelector);o.execute=function(){var e=r.width(),i={};i.amount=u.length,i.rows={},i.previousRow=0,i.currentRow=1,i.itemWidthCount=0,u.each(function(o,u){var c=Math.floor(1*t(this).outerWidth()/1),s=r.find(n.itemSelector+":nth-child(n+"+(o+2)+")").width();if(i.itemWidthCount=i.itemWidthCount+c,i.rows["row"+i.currentRow]={},i.rows["row"+i.currentRow].lastItem=o+1,i.itemWidthCount>=e||o+1>=i.amount||Math.floor(i.itemWidthCount+s)>e){var h=0==i.previousRow?i.rows["row"+i.currentRow].lastItem:i.rows["row"+i.currentRow].lastItem-i.rows["row"+i.previousRow].lastItem,w=i.rows["row"+i.currentRow].lastItem-h+1;i.rows["row"+i.currentRow].firstItem=w,i.previousRow++,i.currentRow++,i.itemWidthCount=0}});var o=function(e){var n=0;e.css({height:"auto"}),e.each(function(){var e=t(this).height();n=e>=n?e:n}),e.css({height:n+"px"})};t.each(i.rows,function(e,i){var u=r.find(n.itemSelector+":nth-child(n+"+i.firstItem+"):nth-child(-n+"+i.lastItem+")");if(o(u),null!=n.innerSelectors){var c=n.innerSelectors.split(",");t.each(c,function(t,e){o(u.find(e))})}})},t(window).on("resize",function(){o.execute(),t.isFunction(n.onResize)&&n.onResize(o)}),o.Initialize=function(){o.execute(),t.isFunction(n.onInit)&&n.onInit(o)},o.Initialize()})}}(jQuery);
