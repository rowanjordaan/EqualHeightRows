!function(m){m.fn.equalHeightRows=function(t){var e=m(this),w={settings:{}};w.settings=m.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null,wrapRows:!1,resizeTimeout:150,stoppedResizingresizeTimeout:150},t);var s=function(t){var e=0;t.css({height:"auto"}),1<t.length&&(t.each(function(){var t=m(this).outerHeight();e=e<=t?t:e}),t.css({height:e+"px"}))},a=function(t){var r={};r.selector=m(t),r.items=r.selector.find(w.settings.itemSelector),r.itemAmount=r.items.length,r.rowsData={},r.rowsItems={};var a=0,c=1,l=0,u=parseFloat(r.selector.css("width"));return(w.settings.wrapRows||0<m(r.selector).find('[data-type="row"]:nth-child(1)').length)&&m(r.selector).find('[data-type="row"]').contents().unwrap(),r.items.each(function(t,e){r.rowsData["row"+c]={lastItem:t+1};var i,s;if(i=parseFloat(window.getComputedStyle(e).width),s=r.selector.find(w.settings.itemSelector+":nth-child("+(t+2)+")").length?parseFloat(r.selector.find(w.settings.itemSelector+":nth-child("+(t+2)+")").css("width")):0,u<=(l+=i)||t+1>=r.itemAmount&&l<u||Math.floor(l+s)>u){var n=0==a?r.rowsData["row"+c].lastItem:r.rowsData["row"+c].lastItem-r.rowsData["row"+a].lastItem,o=r.rowsData["row"+c].lastItem-n+1;r.rowsData["row"+c].firstItem=o,r.rowsItems["row"+c]=r.items.filter(w.settings.itemSelector+":nth-child(n+"+o+"):nth-child(-n+"+r.rowsData["row"+c].lastItem+")"),a=c,c++,l=0}}),m.each(r.rowsItems,function(t,i){if(s(i),w.settings.wrapRows&&i.wrapAll('<div class="'+w.settings.wrapRows+" "+t+'" data-type="row"></div>'),null!=w.settings.innerSelectors){var e=w.settings.innerSelectors.split(",");m.each(e,function(t,e){s(i.find(e)),s(i)})}}),r};return w.execute=function(i){var s={};return i=void 0!==i&&i,e.each(function(t,e){(!1===i||!1!==i&&m(e).is(i))&&(s[t]=a(m(e)))}),s},this.each(function(t,e){var i,s={data:{}},n=!1,o=!1,r=function(){a(e),m.isFunction(w.settings.onResize)&&w.settings.onResize(s)};return m(window).on("resize",function(){var t;return clearTimeout(i),0<w.settings.resizeTimeout&&!1!==w.settings.resizeTimeout?!1===n?(r(),n=!0):(!1===o&&(t=setTimeout(function(){return o=n=!1,r(),!0},w.settings.resizeTimeout)),o=!0,i=setTimeout(function(){return r(),clearTimeout(t),!0},w.settings.stoppedResizingresizeTimeout),!1):(r(),!0)}),s.Initialize=function(){s.data=a(e),m.isFunction(w.settings.onInit)&&w.settings.onInit(s)},s.Initialize()}),w}}(jQuery);
