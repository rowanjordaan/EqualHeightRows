!function(t){t.fn.equalHeightRows=function(e){var n=t.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null,calculationType:"offset"},e);this.each(function(e,o){var i=this,r=t(this),u=r.find(n.itemSelector);i.execute=function(){var e=r.width(),o={};o.amount=u.length,o.rows={},o.previousRow=0,o.currentRow=1,o.itemWidthCount=0,u.each(function(i,c){if(o.rows["row"+o.currentRow]={},o.rows["row"+o.currentRow].lastItem=i+1,function(){switch(n.calculationType){case"width":var s=Math.floor(1*t(c).width()/1),l=r.find(n.itemSelector+":nth-child(n+"+(i+2)+")").width();return o.itemWidthCount=o.itemWidthCount+s,o.itemWidthCount>=e||i+1>=o.amount||Math.floor(o.itemWidthCount+l)>e;default:return t(c).offset().top!=(!(o.amount<i+2)&&u.filter(":nth-child("+(i+2)+")").offset().top)}}()){var s=0==o.previousRow?o.rows["row"+o.currentRow].lastItem:o.rows["row"+o.currentRow].lastItem-o.rows["row"+o.previousRow].lastItem,l=o.rows["row"+o.currentRow].lastItem-s+1;o.rows["row"+o.currentRow].firstItem=l,o.previousRow=o.currentRow,o.currentRow++,o.itemWidthCount=0}});var i=function(e){var n=0;e.css({height:"auto"}),e.each(function(){var e=t(this).outerHeight();n=e>=n?e:n}),e.css({height:n+"px"})};t.each(o.rows,function(e,o){var u=r.find(n.itemSelector+":nth-child(n+"+o.firstItem+"):nth-child(-n+"+o.lastItem+")");if(i(u),null!=n.innerSelectors){var c=n.innerSelectors.split(",");t.each(c,function(t,e){i(u.find(e)),i(u)})}})},t(window).on("resize",function(){i.execute(),t.isFunction(n.onResize)&&n.onResize(i)}),i.Initialize=function(){i.execute(),t.isFunction(n.onInit)&&n.onInit(i)},i.Initialize()})}}(jQuery);
