!function(t){t.fn.equalHeightRows=function(o){var e=t.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null},o);this.each(function(o,r){var i={};i.selector=t(r),i.items=i.selector.find(e.itemSelector),i.execute=function(){var o=i.selector.width();i.rows={},i.rowsitemAmount=i.items.length,i.rowsData={},i.rowspreviousRow=0,i.rowscurrentRow=1,i.rowsitemWidthCount=0,i.items.each(function(r,n){if(i.rowsData["row"+i.rowscurrentRow]={},i.rowsData["row"+i.rowscurrentRow].lastItem=r+1,a=parseFloat(t(n).css("width")),c=parseFloat(i.selector.find(e.itemSelector+":nth-child("+(r+2)+")").css("width")),i.rowsitemWidthCount=i.rowsitemWidthCount+a,i.rowsitemWidthCount>=o||r+1>=i.rowsitemAmount||Math.floor(i.rowsitemWidthCount+c)>o){var s=0==i.rowspreviousRow?i.rowsData["row"+i.rowscurrentRow].lastItem:i.rowsData["row"+i.rowscurrentRow].lastItem-i.rowsData["row"+i.rowspreviousRow].lastItem,w=i.rowsData["row"+i.rowscurrentRow].lastItem-s+1;i.rowsData["row"+i.rowscurrentRow].firstItem=w,i.rowspreviousRow=i.rowscurrentRow,i.rowscurrentRow++,i.rowsitemWidthCount=0}var a,c});var r=function(o){var e=0;o.css({height:"auto"}),o.each(function(){var o=t(this).outerHeight();e=o>=e?o:e}),o.css({height:e+"px"})};t.each(i.rowsData,function(o,n){var s=i.items.filter(e.itemSelector+":nth-child(n+"+n.firstItem+"):nth-child(-n+"+n.lastItem+")");if(r(s),null!=e.innerSelectors){var w=e.innerSelectors.split(",");t.each(w,function(t,o){r(s.find(o)),r(s)})}})},t(window).on("resize",function(){i.execute(),t.isFunction(e.onResize)&&e.onResize(i)}),i.Initialize=function(){i.execute(),t.isFunction(e.onInit)&&e.onInit(i)},i.Initialize()})}}(jQuery);
