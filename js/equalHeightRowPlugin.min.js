!function(t){t.fn.equalHeightRows=function(e){var n=t.extend({onInit:null,onResize:null,itemSelector:".item",innerSelectors:null},e);this.each(function(e,i){var o=this,r=t(this),u=r.find(n.itemSelector);o.execute=function(){var e=r.width(),i={};i.amount=u.length,i.rows={},i.previousRow=0,i.currentRow=1,i.itemWidthCount=0,u.each(function(o,u){if(i.rows["row"+i.currentRow]={},i.rows["row"+i.currentRow].lastItem=o+1,w=Math.floor(1*t(u).width()/1),h=r.find(n.itemSelector+":nth-child(n+"+(o+2)+")").width(),i.itemWidthCount=i.itemWidthCount+w,i.itemWidthCount>=e||o+1>=i.amount||Math.floor(i.itemWidthCount+h)>e){var c=0==i.previousRow?i.rows["row"+i.currentRow].lastItem:i.rows["row"+i.currentRow].lastItem-i.rows["row"+i.previousRow].lastItem,s=i.rows["row"+i.currentRow].lastItem-c+1;i.rows["row"+i.currentRow].firstItem=s,i.previousRow=i.currentRow,i.currentRow++,i.itemWidthCount=0}var w,h});var o=function(e){var n=0;e.css({height:"auto"}),e.each(function(){var e=t(this).outerHeight();n=e>=n?e:n}),e.css({height:n+"px"})};t.each(i.rows,function(e,i){var u=r.find(n.itemSelector+":nth-child(n+"+i.firstItem+"):nth-child(-n+"+i.lastItem+")");if(o(u),null!=n.innerSelectors){var c=n.innerSelectors.split(",");t.each(c,function(t,e){o(u.find(e)),o(u)})}})},t(window).on("resize",function(){o.execute(),t.isFunction(n.onResize)&&n.onResize(o)}),o.Initialize=function(){o.execute(),t.isFunction(n.onInit)&&n.onInit(o)},o.Initialize()})}}(jQuery);
